#include "oled_menu.h"

#include "oled.h"

#include "stm32f1xx_hal.h"
//#include "oledfont.h"

void (*current_operation_index)(); //执行当前操作函数
uint8_t func_index = 0;
uint8_t key1;
uint8_t key2;
unsigned char ikun0[];
/*定义了索引数组，索引数组要配合主程序按键值进行选择*/
 Menu_table  table[26]=
{
    {0,0,1,(*show0)},//一级界面
	
    {1,2, 5,(*show1)},//二级界面    第一行
    {2,3, 9,(*show2)},//二级界面    第二行
    {3,4,13,(*show3)},//二级界面   第三行
    {4,1, 0,(*show4)},//三级界面    Back
	
    {5, 6, 4, (*show5)},  //三级菜单 Back
    {6, 7, 5, (*show6)}, //三级菜单 Electric Info
    {7, 8, 5, (*show7)}, //三级菜单 Alarm Info
    {8, 5, 5, (*show8)}, //三级菜单 Vehicle Info

    {9 , 10, 4, (*show9)},    //三级菜单  Back
    {10, 11, 9, (*show10)}, //三级菜单 Electric Info
    {11, 12, 9, (*show11)}, //三级菜单 Alarm Info
    {12, 9 , 9, (*show12)},  //三级菜单 Vehicle Info

    {13, 14, 4, (*show13)},  //三级菜单  Back
    {14, 15, 13, (*show14)}, //三级菜单 Electric Info
    {15, 16, 13, (*show15)}, //三级菜单 Alarm Info
    {16, 13, 13, (*show16)}, 
};



void  Menu_key_set(void)
{
//  key1 = KEY1_Get();
//  key2 = KEY2_Get();
//	key1 =0;
//	key2 =0;
//  if(key1 == 1)
//  {   
//    func_index=table[func_index].next;//按键next按下后的索引号
//    OLED_Clear();
//  }
//  if(key2 == 1)
//  {
//    func_index=table[func_index].enter;
//    OLED_Clear();
//  }

  current_operation_index=table[func_index].current_operation;//执行当前索引号所对应的功能函数。
  (*current_operation_index)();//执行当前操作函数
}

void show0(void)//第一页
{
//    OLED_ShowString(25,0,"  Menu  ",16);
//	OLED_ShowString(5,2,"data_view",16);
//	OLED_ShowString(5,4,"mode_channel",16);
//	OLED_ShowString(5,6,"pid 3",16);
	OLED_DrawBMP(0,0,64,8,ikun0);
	//OLED_DrawBMP(32,0,101,8,ikun0);
	
}


void show1(void)//第二页
{
	OLED_ShowString(5,0,"data_view  <",16);
	OLED_ShowString(5,2,"mode_channel ",16);
	OLED_ShowString(5,4,"openmv_data ",16);
	OLED_ShowString(5,6,"Back ",16);
}


void show2(void)
{
	
	OLED_ShowString(5,0,"data_view",16);
	OLED_ShowString(5,2,"mode_channel  <",16);
	OLED_ShowString(5,4,"openmv_data",16);
	OLED_ShowString(5,6,"Back ",16);   
}

void show3(void)
{
	OLED_ShowString(5,0,"data_view  ",16);
	OLED_ShowString(5,2,"mode_channel ",16);
	OLED_ShowString(5,4,"openmv_data <",16);
	OLED_ShowString(5,6,"Back ",16);
}

void show4(void)
{
	OLED_ShowString(5,0,"data_view",16);
	OLED_ShowString(5,2,"mode_channel",16);
	OLED_ShowString(5,4,"openmv_data",16);
	OLED_ShowString(5,6,"Back     < ",16);  
}

void show5(void)//第二页第一项对应的第三页
{
	
	OLED_ShowString(5,0,"aim     < ",16); 
	OLED_ShowString(5,2,"aim_left",16);
	OLED_ShowString(5,4,"aim_right",16);
	OLED_ShowString(5,6," ",16); 
	
	OLED_ShowNumber(95,2,aim_speed_left,4,16);
	OLED_ShowNumber(95,4,aim_speed_right,4,16);
	
}

void show6(void)
{
	OLED_ShowString(5,0,"set_speed    ",16); 
	OLED_ShowString(5,2,"set_left",16);
	OLED_ShowString(5,4,"set_right",16);
	OLED_ShowString(5,6," ",16); 
	OLED_ShowNumber(95,2,set_speed_left,4,16);
	OLED_ShowNumber(95,4,set_speed_right,4,16);
}

void show7(void)
{
	OLED_ShowString(5,0,"openmv    ",16); 
	OLED_ShowString(5,2,"line",16);
	OLED_ShowString(5,4,"abgle",16);
	OLED_ShowString(5,6," ",16);

	OLED_Num3(95,3,openmv_number.line_error);
	
	OLED_Num3(95,4,openmv_number.angle_error);

}

void show8(void)
{
	OLED_ShowString(5,0,"Back    ",16); 
	OLED_ShowString(5,2,"left ",16);
	OLED_ShowString(5,4,"right ",16);
	OLED_ShowString(5,6,"Test 1.3 < ",16);
	//OLED_Float(95,2,left_pwm_dat,4,16);
	//OLED_ShowNumber(95,4,right_pwm_dat,4,16);
}

void show9(void)//第二页第二项对应的第三页
{
	OLED_ShowString(5,0,"Back     < ",16); 
	OLED_ShowString(5,2,"MODE1",16);
	OLED_ShowString(5,4,"MODE2",16);
	OLED_ShowString(5,6,"MODE3",16);
}

void show10(void)
{
	OLED_ShowString(5,0,"Back",16);
	OLED_ShowString(5,2,"MODE1 < ",16);
	OLED_ShowString(5,4,"MODE2",16);
	OLED_ShowString(5,6,"MODE3",16); 
}

void show11(void)
{
	OLED_ShowString(5,0,"Back",16);
	OLED_ShowString(5,2,"MODE1",16);
	OLED_ShowString(5,4,"MODE2 < ",16);
	OLED_ShowString(5,6,"MODE3",16); 
}

void show12(void)
{
	OLED_ShowString(5,0,"Back",16);
	OLED_ShowString(5,2,"MODE1",16);
	OLED_ShowString(5,4,"MODE2",16);
	OLED_ShowString(5,6,"MODE3 < ",16); 
}

void show13(void)//第二页第三项对应的第三页
{
	OLED_ShowString(5,0,"Back     < ",16); 
	OLED_ShowString(5,2,"MODE4",16);
	OLED_ShowString(5,4,"Test 3.2",16);
	OLED_ShowString(5,6,"Test 3.3",16);
}

void show14(void)
{
	OLED_ShowString(5,0,"Back    ",16); 
	OLED_ShowString(5,2,"MODE4 < ",16);
	OLED_ShowString(5,4,"Test 3.2",16);
	OLED_ShowString(5,6,"Test 3.3",16);
}

void show15(void)
{
	OLED_ShowString(5,0,"Back    ",16); 
	OLED_ShowString(5,2,"MODE4",16);
	OLED_ShowString(5,4,"Test 3.2 < ",16);
	OLED_ShowString(5,6,"Test 3.3",16);
}

void show16(void)
{
	OLED_ShowString(5,0,"Back    ",16); 
	OLED_ShowString(5,2,"MODE4",16);
	OLED_ShowString(5,4,"Test 3.2",16);
	OLED_ShowString(5,6,"Test 3.3 < ",16);
    
}
unsigned char ikun0[]=
{
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x80,0x80,0xC0,0xC0,0x60,0x60,0x20,0x30,0x30,0x10,0x10,
0x10,0x30,0x30,0x30,0x30,0x38,0x1C,0x0C,0x06,0x06,0x06,0x06,0x0C,0x0C,0x18,0x18,
0x30,0x30,0x60,0xE0,0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xE0,0x70,
0x38,0x1C,0x0C,0x06,0x03,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0xF0,0xFC,0x3F,0x3B,0x3C,0x1E,0x1F,0x1B,0x1E,0x1E,0x1C,0x38,0x70,0xE0,
0x80,0x00,0x20,0x60,0xC0,0x81,0x03,0x07,0x0E,0x1C,0x38,0xE0,0xC0,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0xF0,0xBC,0x0F,0xE3,0xF1,0x00,0x00,
0x00,0x00,0xF0,0xFE,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,
0x00,0xFC,0xFF,0x02,0x02,0x02,0x86,0x84,0x8C,0x98,0x70,0xE0,0xE0,0x38,0x18,0x0D,
0x3F,0x7E,0x60,0xE0,0xE1,0xC7,0xDE,0xF8,0xE0,0x80,0x00,0x00,0x03,0x3F,0xF8,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x7F,0xE3,0x60,0xE0,
0xE0,0x30,0x7F,0xFF,0x80,0x80,0x80,0x80,0xC0,0xFE,0xFF,0xEC,0xCC,0x8E,0x0F,0x1B,
0x33,0x67,0x67,0xC0,0xC0,0xC0,0xC3,0xC7,0x67,0x73,0x3C,0x2F,0x3F,0x78,0x60,0x60,
0xC0,0xC0,0x41,0x47,0x67,0x37,0x99,0xCE,0xE7,0xE7,0xFC,0xF8,0xDC,0x0E,0x07,0x00,
0x00,0x80,0xC0,0x60,0x30,0x18,0x3C,0x3C,0x24,0x26,0x66,0x62,0x62,0x67,0x6F,0x3F,
0xFF,0xF0,0xE1,0x8F,0x3F,0x3F,0x7F,0x7F,0x7F,0x7F,0x7F,0x3F,0x1F,0x0F,0x00,0x80,
0x80,0x80,0x00,0x00,0x00,0x1F,0x3D,0x28,0x78,0x58,0x58,0xD8,0xD8,0xD8,0x48,0x48,
0x2C,0x3F,0x0F,0x00,0x00,0x0E,0x3F,0x7F,0xFF,0xFF,0x7F,0x1F,0x07,0x00,0x00,0x00,
0xFE,0x83,0x03,0x03,0x03,0x02,0x06,0x06,0x04,0x0C,0x0C,0x08,0x18,0x18,0x18,0x10,
0xFF,0x7F,0x3F,0x3F,0x3F,0x3F,0x3E,0x7F,0x7F,0x7F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,
0xFC,0xFC,0xFC,0xFC,0xFC,0xFF,0x7F,0x7F,0x3F,0x3E,0x3E,0x9E,0x04,0x00,0x00,0x00,
0x1F,0x71,0xC1,0x81,0x01,0x03,0x03,0x02,0x06,0x06,0x04,0x0C,0x18,0x18,0x30,0xF0,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFE,0xFE,0xFE,0xFC,0xF8,0xF0,0x01,0x07,0xFD,0xFB,0xFB,
0xFB,0xFB,0xFF,0xF7,0xF7,0x37,0x17,0x07,0x17,0x37,0xF7,0xFF,0xFB,0xFB,0xFB,0xFB,
0xFD,0xFD,0x03,0x01,0xF0,0xFC,0xFC,0xFE,0xFE,0xFF,0xFF,0xFD,0xF0,0xC0,0x00,0x00,
};
